var GameBundle;(()=>{"use strict";var e={457:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Board=t.stringToPiece=void 0;var o=i(412),r=i(47);function s(e){for(var t in o.PieceTypes)if(o.PieceTypes[t]===e)return o.PieceTypes[t];return o.PieceTypes.EMPTY}t.stringToPiece=s;var n=function(){function e(e,t){void 0===t&&(t=!1),this.fen=e,this.whiteKingPosition=[-1,-1],this.blackKingPosition=[-1,-1],this.ROWS=0,this.COLUMNS=0,this.boardSetup=[],this.movesList=[],this.movesList.push([[-1,-1],[-1,-1],null,null]),this.convertFen(e),this.pseudoLegal=t,this.mustLevelUp=!1}return e.prototype.movePiece=function(e,t){var i=e[0],s=e[1],n=t[0],p=t[1];if(this.boardSetup[i][s].getType()===o.PieceTypes.EMPTY)return!1;if(!this.pseudoLegal&&!this.coordinateInList(this.validMoves([i,s]),[n,p]))return!1;if(this.pseudoLegal&&!this.coordinateInList(this.pseudoLegalMoves([i,s]),[n,p]))return!1;this.getLastMove()[0].toString()!=[-1,-1].toString()&&this.boardSetup[this.getLastMove()[0][0]][this.getLastMove()[0][1]].unhighlightPiece(),this.getLastMove()[1].toString()!=[-1,-1].toString()&&this.boardSetup[this.getLastMove()[1][0]][this.getLastMove()[1][1]].unhighlightPiece(),this.movesList.push([[i,s],[n,p],this.boardSetup[i][s],this.boardSetup[n][p]]);var u=this.boardSetup[n][p].getTotalXP();return this.boardSetup[n][p]=this.boardSetup[i][s],this.boardSetup[n][p].incrementMoveCounter(),this.mustLevelUp=this.boardSetup[n][p].addXP(u),!0===this.mustLevelUp&&(this.mustLevelUp=[n,p]),this.boardSetup[i][s]=new r.Piece,this.boardSetup[n][p].getType()===o.PieceTypes.KING&&(this.boardSetup[n][p].getSide()===o.Side.WHITE?this.whiteKingPosition=[n,p]:this.blackKingPosition=[n,p]),this.boardSetup[i][s].highlightPiece(),this.boardSetup[n][p].highlightPiece(),this.updateFen(),!0},e.prototype.undoMove=function(){var e=this.movesList.pop();if(void 0===e)return!1;var t=e[0],i=e[1],o=e[2],r=e[3];return null!==o&&null!==r&&(this.boardSetup[t[0]][t[1]]=o,this.boardSetup[i[0]][i[1]]=r,!0)},e.prototype.validMoves=function(e){for(var t=e[0],i=e[1],r=this.pseudoLegalMoves([t,i]),s=[],n=this.boardSetup[t][i].getSide(),p=n===o.Side.WHITE?this.whiteKingPosition:this.blackKingPosition,u=[t,i].toString()==p.toString(),a=0,h=r;a<h.length;a++){var d=h[a];u&&!this.kingInCheck(d,n,p,d)?s.push(d):u||this.kingInCheck(p,n,[t,i],d)||s.push(d)}return s},e.prototype.sideHasLegalMoves=function(e){for(var t=0;t<this.ROWS;t++)for(var i=0;i<this.COLUMNS;i++)if(this.boardSetup[t][i].getSide()===e&&this.validMoves([t,i]).length>0)return!0;return!1},e.prototype.printAllValidMoves=function(e){for(var t=0;t<this.ROWS;t++)for(var i=0;i<this.COLUMNS;i++)this.boardSetup[t][i].getSide()===e&&this.validMoves([t,i]).length>0&&console.log([t,i],"->",this.validMoves([t,i]))},e.prototype.kingInCheck=function(e,t,i,o){return void 0===i&&(i=[-1,-1]),void 0===o&&(o=[-1,-1]),!!(this.checkFromDiagonals(e,t,i,o)||this.checkFromLines(e,t,i,o)||this.checkFromKnight(e,t,i,o)||this.checkFromPawn(e,t,i,o))},e.prototype.checkFromLines=function(e,t,i,o){for(var s=e[0],n=e[1],p=void 0===i?[-1,-1]:i,u=p[0],a=p[1],h=void 0===o?[-1,-1]:o,d=h[0],S=h[1],c=1;s+c<this.ROWS;c++){if((0,r.oppositeSide)(t,this.boardSetup[s+c][n].getSide())&&(0,r.isQueenOrRook)(this.boardSetup[s+c][n])){if(s+c===d&&n===S)break;return!0}if((s+c!==u||n!==a)&&(s+c===d&&n===S||(0,r.sameSide)(t,this.boardSetup[s+c][n].getSide())))break}for(c=1;s-c>=0;c++){if((0,r.oppositeSide)(t,this.boardSetup[s-c][n].getSide())&&(0,r.isQueenOrRook)(this.boardSetup[s-c][n])){if(s-c===d&&n===S)break;return!0}if((s-c!==u||n!==a)&&(s-c===d&&n===S||(0,r.sameSide)(t,this.boardSetup[s-c][n].getSide())))break}for(c=1;n+c<this.COLUMNS;c++){if((0,r.oppositeSide)(t,this.boardSetup[s][n+c].getSide())&&(0,r.isQueenOrRook)(this.boardSetup[s][n+c])){if(s===d&&n+c===S)break;return!0}if((s!==u||n+c!==a)&&(s===d&&n+c===S||(0,r.sameSide)(t,this.boardSetup[s][n+c].getSide())))break}for(c=1;n-c>=0;c++){if((0,r.oppositeSide)(t,this.boardSetup[s][n-c].getSide())&&(0,r.isQueenOrRook)(this.boardSetup[s][n-c])){if(s===d&&n-c===S)break;return!0}if((s!==u||n-c!==a)&&(s===d&&n-c===S||(0,r.sameSide)(t,this.boardSetup[s][n-c].getSide())))break}return!1},e.prototype.checkFromDiagonals=function(e,t,i,o){for(var s=e[0],n=e[1],p=void 0===i?[-1,-1]:i,u=p[0],a=p[1],h=void 0===o?[-1,-1]:o,d=h[0],S=h[1],c=1;s+c<this.ROWS&&n+c<this.COLUMNS;c++){if((0,r.oppositeSide)(t,this.boardSetup[s+c][n+c].getSide())&&(0,r.isQueenOrBishop)(this.boardSetup[s+c][n+c])){if(s+c===d&&n+c===S)break;return!0}if((s+c!==u||n+c!==a)&&(s+c===d&&n+c===S||(0,r.sameSide)(t,this.boardSetup[s+c][n+c].getSide())))break}for(c=1;s-c>=0&&n-c>=0;c++){if((0,r.oppositeSide)(t,this.boardSetup[s-c][n-c].getSide())&&(0,r.isQueenOrBishop)(this.boardSetup[s-c][n-c])){if(s-c===d&&n-c===S)break;return!0}if((s-c!==u||n-c!==a)&&(s-c===d&&n-c===S||(0,r.sameSide)(t,this.boardSetup[s-c][n-c].getSide())))break}for(c=1;s+c<this.ROWS&&n-c>=0;c++){if((0,r.oppositeSide)(t,this.boardSetup[s+c][n-c].getSide())&&(0,r.isQueenOrBishop)(this.boardSetup[s+c][n-c])){if(s+c===d&&n-c===S)break;return!0}if((s+c!==u||n-c!==a)&&(s+c===d&&n-c===S||(0,r.sameSide)(t,this.boardSetup[s+c][n-c].getSide())))break}for(c=1;s-c>=0&&n+c<this.COLUMNS;c++){if((0,r.oppositeSide)(t,this.boardSetup[s-c][n+c].getSide())&&(0,r.isQueenOrBishop)(this.boardSetup[s-c][n+c])){if(s-c===d&&n+c===S)break;return!0}if((s-c!==u||n+c!==a)&&(s-c===d&&n+c===S||(0,r.sameSide)(t,this.boardSetup[s-c][n+c].getSide())))break}return!1},e.prototype.checkFromKnight=function(e,t,i,o){var s=e[0],n=e[1],p=void 0===i?[-1,-1]:i,u=(p[0],p[1],void 0===o?[-1,-1]:o),a=u[0],h=u[1],d=s-2>=0,S=s-1>=0,c=s+2<this.ROWS,g=s+1<this.ROWS,b=n-2>=0,P=n-1>=0,f=n+2<this.COLUMNS,l=n+1<this.COLUMNS;return!!(d&&P&&(0,r.oppositeSide)(t,this.boardSetup[s-2][n-1].getSide())&&(0,r.isKnight)(this.boardSetup[s-2][n-1])&&[a,h].toString()!=[s-2,n-1].toString()||d&&l&&(0,r.oppositeSide)(t,this.boardSetup[s-2][n+1].getSide())&&(0,r.isKnight)(this.boardSetup[s-2][n+1])&&[a,h].toString()!=[s-2,n+1].toString()||S&&f&&(0,r.oppositeSide)(t,this.boardSetup[s-1][n+2].getSide())&&(0,r.isKnight)(this.boardSetup[s-1][n+2])&&[a,h].toString()!=[s-1,n+2].toString()||g&&f&&(0,r.oppositeSide)(t,this.boardSetup[s+1][n+2].getSide())&&(0,r.isKnight)(this.boardSetup[s+1][n+2])&&[a,h].toString()!=[s+1,n+2].toString()||c&&l&&(0,r.oppositeSide)(t,this.boardSetup[s+2][n+1].getSide())&&(0,r.isKnight)(this.boardSetup[s+2][n+1])&&[a,h].toString()!=[s+2,n+1].toString()||c&&P&&(0,r.oppositeSide)(t,this.boardSetup[s+2][n-1].getSide())&&(0,r.isKnight)(this.boardSetup[s+2][n-1])&&[a,h].toString()!=[s+2,n-1].toString()||g&&b&&(0,r.oppositeSide)(t,this.boardSetup[s+1][n-2].getSide())&&(0,r.isKnight)(this.boardSetup[s+1][n-2])&&[a,h].toString()!=[s+1,n-2].toString()||S&&b&&(0,r.oppositeSide)(t,this.boardSetup[s-1][n-2].getSide())&&(0,r.isKnight)(this.boardSetup[s-1][n-2])&&[a,h].toString()!=[s-1,n-2].toString())},e.prototype.checkFromPawn=function(e,t,i,r){var s=e[0],n=e[1],p=void 0===i?[-1,-1]:i,u=(p[0],p[1],void 0===r?[-1,-1]:r),a=u[0],h=u[1];if(s>0&&t===o.Side.WHITE){if(n+1<this.COLUMNS&&this.boardSetup[s-1][n+1].getType()===o.PieceTypes.PAWN&&this.boardSetup[s-1][n+1].getSide()===o.Side.BLACK&&[a,h].toString()!=[s-1,n+1].toString())return!0;if(n-1>=0&&this.boardSetup[s-1][n-1].getType()===o.PieceTypes.PAWN&&this.boardSetup[s-1][n-1].getSide()===o.Side.BLACK&&[a,h].toString()!=[s-1,n-1].toString())return!0}if(s<this.ROWS-1&&t===o.Side.BLACK){if(n+1<this.COLUMNS&&this.boardSetup[s+1][n+1].getType()===o.PieceTypes.PAWN&&this.boardSetup[s+1][n+1].getSide()===o.Side.WHITE&&[a,h].toString()!=[s+1,n+1].toString())return!0;if(n-1>=0&&this.boardSetup[s+1][n-1].getType()===o.PieceTypes.PAWN&&this.boardSetup[s+1][n-1].getSide()===o.Side.WHITE&&[a,h].toString()!=[s+1,n-1].toString())return!0}return!1},e.prototype.coordinateInList=function(e,t){for(var i=0,o=e;i<o.length;i++)if(o[i].toString()===t.toString())return!0;return!1},e.prototype.pseudoLegalMoves=function(e){var t=e[0],i=e[1],s=[],n=this.boardSetup[t][i].getDirections(),p=this.boardSetup[t][i].getRange();for(var u in n)switch(n[u]){case o.Direction.LINE:for(var a=p[u]===o.INFINITE_RANGE?Math.max(this.ROWS,this.COLUMNS):p[u],h=1;h<=a&&t+h<this.ROWS&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i])&&(s.push([t+h,i]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i]));h++);for(h=1;h<=a&&t-h>=0&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i])&&(s.push([t-h,i]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i]));h++);for(h=1;h<=a&&i+h<this.COLUMNS&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t][i+h])&&(s.push([t,i+h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t][i+h]));h++);for(h=1;h<=a&&i-h>=0&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t][i-h])&&(s.push([t,i-h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t][i-h]));h++);break;case o.Direction.DIAGONAL:for(a=p[u]===o.INFINITE_RANGE?Math.max(this.ROWS,this.COLUMNS):p[u],h=1;h<=a&&t+h<this.ROWS&&i+h<this.COLUMNS&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i+h])&&(s.push([t+h,i+h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i+h]));h++);for(h=1;h<=a&&t-h>=0&&i-h>=0&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i-h])&&(s.push([t-h,i-h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i-h]));h++);for(h=1;h<=a&&t+h<this.ROWS&&i-h>=0&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i-h])&&(s.push([t+h,i-h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t+h][i-h]));h++);for(h=1;h<=a&&t-h>=0&&i+h<this.COLUMNS&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i+h])&&(s.push([t-h,i+h]),!(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t-h][i+h]));h++);break;case o.Direction.PAWN:switch(this.boardSetup[t][i].getSide()){case o.Side.WHITE:if(0===t)break;this.boardSetup[t-1][i].getType()===o.PieceTypes.EMPTY&&s.push([t-1,i]),6===t&&this.boardSetup[t-2][i].getType()===o.PieceTypes.EMPTY&&this.boardSetup[t-1][i].getType()===o.PieceTypes.EMPTY&&s.push([t-2,i]),i-1>=0&&(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t-1][i-1])&&s.push([t-1,i-1]),i+1<this.COLUMNS&&(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t-1][i+1])&&s.push([t-1,i+1]);break;case o.Side.BLACK:if(t==this.ROWS-1)break;this.boardSetup[t+1][i].getType()===o.PieceTypes.EMPTY&&s.push([t+1,i]),1===t&&this.boardSetup[t+2][i].getType()===o.PieceTypes.EMPTY&&this.boardSetup[t+1][i].getType()===o.PieceTypes.EMPTY&&s.push([t+2,i]),i-1>=0&&(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t+1][i-1])&&s.push([t+1,i-1]),i+1<this.COLUMNS&&(0,r.oppositePiece)(this.boardSetup[t][i],this.boardSetup[t+1][i+1])&&s.push([t+1,i+1])}break;case o.Direction.L:var d=t-2>=0,S=t-1>=0,c=t+2<this.ROWS,g=t+1<this.ROWS,b=i-2>=0,P=i-1>=0,f=i+2<this.COLUMNS,l=i+1<this.COLUMNS;d&&P&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-2][i-1])&&s.push([t-2,i-1]),d&&l&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-2][i+1])&&s.push([t-2,i+1]),S&&f&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-1][i+2])&&s.push([t-1,i+2]),g&&f&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+1][i+2])&&s.push([t+1,i+2]),c&&l&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+2][i+1])&&s.push([t+2,i+1]),c&&P&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+2][i-1])&&s.push([t+2,i-1]),g&&b&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t+1][i-2])&&s.push([t+1,i-2]),S&&b&&!(0,r.sameSidePiece)(this.boardSetup[t][i],this.boardSetup[t-1][i-2])&&s.push([t-1,i-2])}for(var T in this.boardSetup[t][i].getAbilities());return s},e.prototype.convertFen=function(e){var t=this;e.split("/").forEach((function(e,i){if(0==i){var n=e.split(" ");t.ROWS=Number(n[0]),t.COLUMNS=Number(n[1]),t.boardSetup=[];for(var p=0;p<t.ROWS;p++){t.boardSetup[p]=[];for(var u=0;u<t.ROWS;u++)t.boardSetup[p][u]=new r.Piece}}else for(var a=0,h=0,d=n=e.split("");h<d.length;h++){var S=d[h],c=s(S.toLowerCase());if(c!==o.PieceTypes.EMPTY){var g=S===S.toLowerCase()?o.Side.BLACK:o.Side.WHITE;switch(t.boardSetup[i-1][a]=new r.Piece(c,g,[i-1,a]),c){case o.PieceTypes.KING:t.boardSetup[i-1][a].setDirections([o.Direction.LINE,o.Direction.DIAGONAL]),t.boardSetup[i-1][a].setRange([1,1]),g===o.Side.WHITE?t.whiteKingPosition=[i-1,a]:t.blackKingPosition=[i-1,a];break;case o.PieceTypes.QUEEN:t.boardSetup[i-1][a].setDirections([o.Direction.LINE,o.Direction.DIAGONAL]),t.boardSetup[i-1][a].setRange([o.INFINITE_RANGE,o.INFINITE_RANGE]);break;case o.PieceTypes.BISHOP:t.boardSetup[i-1][a].setDirections([o.Direction.DIAGONAL]),t.boardSetup[i-1][a].setRange([o.INFINITE_RANGE]);break;case o.PieceTypes.ROOK:t.boardSetup[i-1][a].setDirections([o.Direction.LINE]),t.boardSetup[i-1][a].setRange([o.INFINITE_RANGE]);break;case o.PieceTypes.KNIGHT:t.boardSetup[i-1][a].setDirections([o.Direction.L]),t.boardSetup[i-1][a].setRange([1]);break;case o.PieceTypes.PAWN:t.boardSetup[i-1][a].setDirections([o.Direction.PAWN]),t.boardSetup[i-1][a].setRange([1])}a++}else a+=Number(S)}}))},e.prototype.updateFen=function(){var e=this,t="";this.fen.split("/").forEach((function(i,r){if(r-1!=e.movesList[e.movesList.length-1][0][0]&&r-1!=e.movesList[e.movesList.length-1][1][0])t+=i+"/";else{for(var s=0,n=e.boardSetup[r-1];s<n.length;s++){var p=n[s];if(p.getType()!=o.PieceTypes.EMPTY)t+=p.getSide()===o.Side.WHITE?p.getType().toUpperCase():p.getType();else if(isNaN(Number(t.slice(-1))))t+="1";else{var u=(Number(t.slice(-1))+1).toString();t=t.slice(0,-1)+u}}t+="/"}})),this.fen=t.slice(0,-1)},e.prototype.getFen=function(){return this.fen},e.prototype.getBoard=function(){return this.boardSetup},e.prototype.getRows=function(){return this.ROWS},e.prototype.getColumns=function(){return this.COLUMNS},e.prototype.getLastMove=function(){return this.movesList[this.movesList.length-1]},e.prototype.getWhiteKingPosition=function(){return this.whiteKingPosition},e.prototype.getBlackKingPosition=function(){return this.blackKingPosition},e.prototype.pieceMustLevelUp=function(){return this.mustLevelUp},e.prototype.levelUpDone=function(){this.mustLevelUp=!1},e.prototype.pseudoLegalGame=function(){return this.pseudoLegal},e.prototype.printBoard=function(){for(var e=0,t=this.boardSetup;e<t.length;e++){for(var i="",r=0,s=t[e];r<s.length;r++){var n=s[r];i+=n.getSide()===o.Side.WHITE?n.getType().toString().toUpperCase()+" ":n.getType().toString()+" "}console.log(i)}},e.prototype.printValidSquares=function(e){for(var t=e[0],i=e[1],o="",r=this.validMoves([t,i]),s=0;s<this.ROWS;s++){for(var n="",p=0;p<this.COLUMNS;p++)[s,p].toString()==[t,i].toString()?n+="@ ":n+=this.coordinateInList(r,[s,p])?"x ":". ";o+=n+"\n"}console.log(o)},e}();t.Board=n},941:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameState=void 0;var o=i(412),r=i(47),s=i(457),n=function(){function e(e,t,i,r,n){void 0===n&&(n=!1),this.board=new s.Board(e,n),this.currentTurn=t,this.timeWhite=i,this.timeBlack=r,this.gameResult=o.GameResult.IN_PROGRESS}return e.prototype.movePiece=function(e,t){return!(this.gameResult!=o.GameResult.IN_PROGRESS||this.board.pieceMustLevelUp()||this.board.getBoard()[e[0]][e[1]].getSide()!=o.Side.WHITE&&0===this.currentTurn||this.board.getBoard()[e[0]][e[1]].getSide()!=o.Side.BLACK&&1===this.currentTurn||!this.board.movePiece(e,t)||(this.changeTurn(),this.stalemate()&&(this.gameResult=o.GameResult.DRAW),this.checkmate()&&(this.gameResult=0===this.currentTurn?o.GameResult.BLACK_WIN:o.GameResult.WHITE_WIN),0))},e.prototype.levelUp=function(e){var t=this.board.pieceMustLevelUp();if(!1===t)return!1;var i=t[0],o=t[1];return-1!==(0,r.abilitesForPiece)(this.board.getBoard()[i][o]).indexOf(e)&&!!this.board.getBoard()[i][o].addAbility(e)&&(this.board.levelUpDone(),!0)},e.prototype.getTurn=function(){return this.currentTurn},e.prototype.takeback=function(){return!!this.board.undoMove()&&(this.changeTurn(),!0)},e.prototype.checkmate=function(){var e=this.board.getLastMove()[1];return 1===this.currentTurn&&e.toString()===this.board.getBlackKingPosition().toString()||0===this.currentTurn&&e.toString()===this.board.getWhiteKingPosition().toString()||!this.board.pseudoLegalGame()&&(!(0!==this.currentTurn||!this.board.kingInCheck(this.board.getWhiteKingPosition(),o.Side.WHITE)||this.board.sideHasLegalMoves(o.Side.WHITE))||!(1!==this.currentTurn||!this.board.kingInCheck(this.board.getBlackKingPosition(),o.Side.BLACK)||this.board.sideHasLegalMoves(o.Side.BLACK)))},e.prototype.stalemate=function(){return 0===this.currentTurn&&!this.board.sideHasLegalMoves(o.Side.WHITE)||1===this.currentTurn&&!this.board.sideHasLegalMoves(o.Side.BLACK)},e.prototype.getGameResult=function(){return this.gameResult},e.prototype.printBoard=function(){this.board.printBoard()},e.prototype.getBoard=function(){return this.board},e.prototype.changeTurn=function(){this.currentTurn=1-this.currentTurn},e}();t.GameState=n},47:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isKing=t.isPawn=t.isKnight=t.isQueenOrBishop=t.isQueenOrRook=t.sameSide=t.sameSidePiece=t.oppositeSide=t.oppositePiece=t.abilitesForPiece=t.Piece=void 0;var o=i(412),r=function(){function e(e,t,i,r,s,n,p,u){void 0===e&&(e=o.PieceTypes.EMPTY),void 0===t&&(t=o.Side.NONE),void 0===i&&(i=[-1,-1]),void 0===r&&(r=0),void 0===s&&(s=0),void 0===n&&(n=[0]),void 0===p&&(p=[]),void 0===u&&(u=[]),this.type=e,this.side=t,this.initialSquare=i,this.level=r,this.currentXP=s,this.range=n,this.directions=p,this.abilities=u,this.moveCounter=0,this.highlighted=!1}return e.prototype.addXP=function(e){return this.currentXP+=o.PER_MOVE_XP,this.currentXP+=Math.floor(o.CAPTURE_MULTIPLIER*e),o.LEVEL_UP_XP[this.level]<=this.currentXP&&(this.currentXP-=o.LEVEL_UP_XP[this.level],this.level++,!0)},e.prototype.addAbility=function(e){return-1==this.abilities.indexOf(e)&&(this.abilities.push(e),!0)},e.prototype.setDirections=function(e){this.directions=e},e.prototype.getDirections=function(){return this.directions},e.prototype.getAbilities=function(){return this.abilities},e.prototype.setRange=function(e){this.range=e},e.prototype.getRange=function(){return this.range},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},e.prototype.setXP=function(e){this.currentXP=e},e.prototype.getCurrentXP=function(){return this.currentXP},e.prototype.getTotalXP=function(){for(var e=this.currentXP,t=0;t<this.level;t++)e+=o.LEVEL_UP_XP[t];return e},e.prototype.setType=function(e){this.type=e},e.prototype.getType=function(){return this.type},e.prototype.setSide=function(e){this.side=e},e.prototype.getSide=function(){return this.side},e.prototype.incrementMoveCounter=function(){this.moveCounter++},e.prototype.setMoveCounter=function(e){this.moveCounter=e},e.prototype.getMoveCounter=function(){return this.moveCounter},e.prototype.highlightPiece=function(){this.highlighted=!0},e.prototype.unhighlightPiece=function(){this.highlighted=!1},e.prototype.getHighlight=function(){return this.highlighted},e.prototype.getInitialSquare=function(){return this.initialSquare},e}();t.Piece=r,t.abilitesForPiece=function(e){if(e.getType()===o.PieceTypes.EMPTY)return[];for(var t=Object.values(o.PieceAbilities).filter((function(e){return!isNaN(Number(e))})),i=[],r=e.getAbilities(),s=0,n=t;s<n.length;s++){var p=n[s];Number(p)>=100&&Number(p)<200&&i.push(Number(p))}var u=1,a=e.getType();a===o.PieceTypes.PAWN&&(u=2),a===o.PieceTypes.KNIGHT&&(u=3),a===o.PieceTypes.BISHOP&&(u=4),a===o.PieceTypes.ROOK&&(u=5),a===o.PieceTypes.QUEEN&&(u=6),a===o.PieceTypes.KING&&(u=7);for(var h=0,d=t;h<d.length;h++)p=d[h],Number(p)>=100*u&&Number(p)<100*(u+1)&&i.push(Number(p));for(var S=function(e){i=i.filter((function(t){return t!==e}))},c=0,g=r;c<g.length;c++)S(g[c]);return i},t.oppositePiece=function(e,t){return e.getSide()===o.Side.WHITE&&t.getSide()===o.Side.BLACK||e.getSide()===o.Side.BLACK&&t.getSide()===o.Side.WHITE},t.oppositeSide=function(e,t){return e===o.Side.WHITE&&t===o.Side.BLACK||e===o.Side.BLACK&&t===o.Side.WHITE},t.sameSidePiece=function(e,t){return e.getSide()===o.Side.WHITE&&t.getSide()===o.Side.WHITE||e.getSide()===o.Side.BLACK&&t.getSide()===o.Side.BLACK},t.sameSide=function(e,t){return e===o.Side.WHITE&&t===o.Side.WHITE||e===o.Side.BLACK&&t===o.Side.BLACK},t.isQueenOrRook=function(e){return e.getType()===o.PieceTypes.QUEEN||e.getType()===o.PieceTypes.ROOK},t.isQueenOrBishop=function(e){return e.getType()===o.PieceTypes.QUEEN||e.getType()===o.PieceTypes.BISHOP},t.isKnight=function(e){return e.getType()===o.PieceTypes.KNIGHT},t.isPawn=function(e){return e.getType()===o.PieceTypes.PAWN},t.isKing=function(e){return e.getType()===o.PieceTypes.KING}},412:(e,t)=>{var i,o,r,s,n;Object.defineProperty(t,"__esModule",{value:!0}),t.PieceAbilities=t.PieceTypes=t.Side=t.Direction=t.GameResult=t.PER_MOVE_XP=t.CAPTURE_MULTIPLIER=t.LEVEL_UP_XP=t.INFINITE_TIME=t.INFINITE_RANGE=void 0,t.INFINITE_RANGE=-1,t.INFINITE_TIME=-1,t.LEVEL_UP_XP=[10,12,15,19,22,26,30,35,42,50],t.CAPTURE_MULTIPLIER=.3,t.PER_MOVE_XP=1,(n=t.GameResult||(t.GameResult={}))[n.BLACK_WIN=-1]="BLACK_WIN",n[n.DRAW=0]="DRAW",n[n.WHITE_WIN=1]="WHITE_WIN",n[n.IN_PROGRESS=2]="IN_PROGRESS",(s=t.Direction||(t.Direction={})).LINE="LINE",s.DIAGONAL="DIAGONAL",s.L="L",s.PAWN="PAWN",(r=t.Side||(t.Side={})).WHITE="WHITE",r.BLACK="BLACK",r.NONE="NONE",(o=t.PieceTypes||(t.PieceTypes={})).EMPTY=".",o.PAWN="p",o.BISHOP="b",o.KNIGHT="n",o.ROOK="r",o.QUEEN="q",o.KING="k",(i=t.PieceAbilities||(t.PieceAbilities={}))[i.SHIELD=100]="SHIELD",i[i.SCOUT=200]="SCOUT",i[i.TIME_TRAVEL=300]="TIME_TRAVEL",i[i.SMOLDERING=301]="SMOLDERING",i[i.SNIPER=400]="SNIPER",i[i.CONVERT_ENEMY=401]="CONVERT_ENEMY",i[i.COLOR_COMPLEX=402]="COLOR_COMPLEX",i[i.TANK=500]="TANK",i[i.BECOME_KING=600]="BECOME_KING",i[i.SKIP=700]="SKIP",i[i.FRIENDLY_FIRE=701]="FRIENDLY_FIRE",i[i.BLITZKRIEG=702]="BLITZKRIEG",i[i.CASTLING=703]="CASTLING"}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,i),s.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var t=i(412),r=i(941);e.Game=function(){function e(i,o,s,n){void 0===n&&(n=!1),this.gameId=e.gameIdCounter,e.gameIdCounter++,this.whiteId=i,this.blackId=o,this.gameState=new r.GameState(s,0,t.INFINITE_TIME,t.INFINITE_TIME,n),this.gameResult=t.GameResult.IN_PROGRESS}return e.prototype.getWhiteId=function(){return this.whiteId},e.prototype.getBlackId=function(){return this.blackId},e.prototype.getGameState=function(){return this.gameState},e.gameIdCounter=1e3,e}()})(),GameBundle=o})();